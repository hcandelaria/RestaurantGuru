var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.getUserAvatar=getUserAvatar;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _effects=require("redux-saga/effects");var _ramda=require("ramda");var _GithubRedux=_interopRequireDefault(require("../Redux/GithubRedux"));var _marked=_regenerator.default.mark(getUserAvatar);function getUserAvatar(api,action){var username,response,firstUser,avatar;return _regenerator.default.wrap(function getUserAvatar$(_context){while(1){switch(_context.prev=_context.next){case 0:username=action.username;_context.next=3;return(0,_effects.call)(api.getUser,username);case 3:response=_context.sent;if(!response.ok){_context.next=11;break;}firstUser=(0,_ramda.path)(['data','items'],response)[0];avatar=firstUser.avatar_url;_context.next=9;return(0,_effects.put)(_GithubRedux.default.userSuccess(avatar));case 9:_context.next=13;break;case 11:_context.next=13;return(0,_effects.put)(_GithubRedux.default.userFailure());case 13:case"end":return _context.stop();}}},_marked);}