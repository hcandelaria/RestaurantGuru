var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _react=_interopRequireWildcard(require("react"));var _nativeBase=require("native-base");var _reactRedux=require("react-redux");var _reactNative=require("react-native");var _CategoryList=_interopRequireDefault(require("../../Components/CategoryList"));var _CategoriesRedux=_interopRequireDefault(require("../../Redux/CategoriesRedux"));var _RestaurantsRedux=_interopRequireDefault(require("../../Redux/RestaurantsRedux"));var _CitiesRedux=_interopRequireDefault(require("../../Redux/CitiesRedux"));var _Loading=_interopRequireDefault(require("../../Components/Loading"));var _reactNativeGestureHandler=require("react-native-gesture-handler");var _styles=_interopRequireDefault(require("./styles"));var _jsxFileName="C:\\Users\\Smilodon\\Interviews\\bin2rid\\RestaurantGuru\\App\\Containers\\CategoriesView\\index.js";var CategoriesView=function(_Component){(0,_inherits2["default"])(CategoriesView,_Component);function CategoriesView(props,context){var _this;(0,_classCallCheck2["default"])(this,CategoriesView);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(CategoriesView).call(this,props,context));_this.handleOnPress=_this.handleOnPress.bind((0,_assertThisInitialized2["default"])(_this));return _this;}(0,_createClass2["default"])(CategoriesView,[{key:"handleOnPress",value:function handleOnPress(category){if(this.props.city_id.city_id===0){_reactNative.Alert.alert('Please choose a city');}else{var payload={category:category,city_id:this.props.city_id};this.props.updateCategory({category:category});this.props.getRestaurants(payload);this.props.navigation.navigate('RestaurantsView');}}},{key:"componentDidMount",value:function componentDidMount(){this.props.getAllCategories();}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){}},{key:"render",value:function render(){return _react["default"].createElement(_nativeBase.Container,{__source:{fileName:_jsxFileName,lineNumber:48}},_react["default"].createElement(_nativeBase.Text,{style:{textAlign:'center'},__source:{fileName:_jsxFileName,lineNumber:49}},"Choose a category"),this.props.fetchingCategories?_react["default"].createElement(_Loading["default"],{__source:{fileName:_jsxFileName,lineNumber:52}}):_react["default"].createElement(_reactNativeGestureHandler.ScrollView,{__source:{fileName:_jsxFileName,lineNumber:53}},_react["default"].createElement(_CategoryList["default"],{categories:this.props.categories,handleOnPress:this.handleOnPress,__source:{fileName:_jsxFileName,lineNumber:54}})));}}]);return CategoriesView;}(_react.Component);var mapStateToProps=function mapStateToProps(state){return{categories:state.categories.categories,fetchingCategories:state.categories.fetching,restaurants:state.restaurants.restaurants,city_id:state.cities.city_id};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{getAllCategories:function getAllCategories(){dispatch(_CategoriesRedux["default"].getCategoriesRequest());},getRestaurants:function getRestaurants(payload){dispatch(_RestaurantsRedux["default"].getRestaurantsRequest(payload));},getCities:function getCities(payload){dispatch(_CitiesRedux["default"].getCitiesRequest(payload));},updateCategory:function updateCategory(payload){dispatch(_CategoriesRedux["default"].updateCategory(payload));}};};var _default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(CategoriesView);exports["default"]=_default;